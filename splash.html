<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Concre HUB</title>

  <!-- PWA -->
  <link rel="manifest" href="./manifest.json">
  <meta name="theme-color" content="#15416F">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <link rel="apple-touch-icon" href="./assets/img/logo-concrefer.png">

  <!-- anti-cache -->
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;800;900&display=swap" rel="stylesheet">

  <style>
    /* ---- Reset ---- */
    *{ box-sizing:border-box; margin:0; padding:0; }

    body{
      font-family: 'Montserrat', system-ui, -apple-system, sans-serif;
      color:#F3F6FF;
      background: linear-gradient(135deg, #0c2844 0%, #15416F 40%, #1a4f85 70%, #0f2e52 100%);
      min-height:100vh; min-height:100dvh;
      display:flex; flex-direction:column;
      align-items:center; justify-content:center;
      overflow:hidden;
      position:relative;
    }

    /* ---- Background ambient blobs ---- */
    body::before,
    body::after{
      content:'';
      position:absolute;
      border-radius:50%;
      filter:blur(100px);
      opacity:.25;
      pointer-events:none;
    }
    body::before{
      width:500px; height:500px;
      top:-120px; left:-100px;
      background:radial-gradient(circle, #A72141, transparent 70%);
    }
    body::after{
      width:400px; height:400px;
      bottom:-80px; right:-60px;
      background:radial-gradient(circle, #15416F, transparent 70%);
    }

    /* ---- Glassmorphic card ---- */
    .splash-card{
      position:relative; z-index:2;
      width:min(380px, 88vw);
      background: rgba(255,255,255,.07);
      backdrop-filter: blur(24px);
      -webkit-backdrop-filter: blur(24px);
      border:1px solid rgba(255,255,255,.12);
      border-radius:28px;
      padding:48px 32px 40px;
      box-shadow: 0 24px 60px rgba(0,0,0,.4);
      display:flex; flex-direction:column;
      align-items:center; gap:0;
      animation: cardIn .8s ease-out both;
    }
    @keyframes cardIn{
      from{ opacity:0; transform:translateY(30px) scale(.96); }
      to{ opacity:1; transform:translateY(0) scale(1); }
    }

    /* ---- Logos row ---- */
    .logos-row{
      display:flex;
      align-items:center;
      justify-content:center;
      gap:20px;
      margin-bottom:28px;
    }
    .logo-img{
      width:90px; height:90px;
      object-fit:contain;
      filter: drop-shadow(0 4px 16px rgba(0,0,0,.35));
      animation: logoFloat 3s ease-in-out infinite alternate;
    }
    .logo-img.left{ animation-delay:0s; }
    .logo-img.right{ animation-delay:.4s; }
    @keyframes logoFloat{
      from{ transform:translateY(0); }
      to{ transform:translateY(-6px); }
    }

    .logo-divider{
      width:2px; height:60px;
      background: linear-gradient(180deg, transparent, rgba(255,255,255,.35), transparent);
      border-radius:2px;
    }

    /* ---- Text ---- */
    .brand-name{
      font-size:28px;
      font-weight:900;
      letter-spacing:1.5px;
      text-transform:uppercase;
      text-align:center;
      margin-bottom:4px;
      background: linear-gradient(135deg, #fff 30%, #A72141 100%);
      -webkit-background-clip:text;
      -webkit-text-fill-color:transparent;
      background-clip:text;
    }
    .brand-sub{
      font-size:13px;
      font-weight:400;
      color:rgba(255,255,255,.55);
      letter-spacing:2px;
      text-transform:uppercase;
      margin-bottom:28px;
    }

    /* ---- Progress bar ---- */
    .progress-track{
      width:100%;
      height:6px;
      background:rgba(255,255,255,.1);
      border-radius:4px;
      overflow:hidden;
      margin-bottom:16px;
    }
    .progress-fill{
      height:100%;
      width:0%;
      border-radius:4px;
      background: linear-gradient(90deg, #A72141, #e84c6f);
      position:relative;
      transition: width .3s ease;
    }
    .progress-fill::after{
      content:'';
      position:absolute;
      top:0; left:0;
      width:100%; height:100%;
      background: linear-gradient(90deg, transparent 0%, rgba(255,255,255,.35) 50%, transparent 100%);
      animation: shine 1.4s ease-in-out infinite;
    }
    @keyframes shine{
      from{ transform:translateX(-100%); }
      to{ transform:translateX(100%); }
    }

    .progress-pct{
      font-size:12px;
      font-weight:600;
      color:rgba(255,255,255,.5);
      margin-bottom:20px;
      letter-spacing:1px;
    }

    /* ---- Status row ---- */
    .status-row{
      display:flex;
      align-items:center;
      justify-content:space-between;
      width:100%;
      font-size:12px;
      color:rgba(255,255,255,.45);
    }
    .status-dot{
      width:8px; height:8px;
      border-radius:50%;
      display:inline-block;
      margin-right:6px;
      vertical-align:middle;
    }
    .status-dot.online{ background:#16A34A; box-shadow:0 0 8px rgba(22,163,74,.5); }
    .status-dot.offline{ background:#EF4444; box-shadow:0 0 8px rgba(239,68,68,.5); }

    /* ---- Version chip ---- */
    .version{
      margin-top:24px;
      font-size:11px;
      color:rgba(255,255,255,.25);
      letter-spacing:1px;
    }

    /* ---- Fade-out ---- */
    .splash-out{
      animation: outAnim .5s ease-in forwards;
    }
    @keyframes outAnim{
      to{ opacity:0; transform:scale(1.05); }
    }
  </style>
</head>

<body>

  <div class="splash-card" id="splashCard">

    <!-- Logos -->
    <div class="logos-row">
      <img class="logo-img left" src="./assets/img/logo-concretrack.png" alt="ConcreTrack">
      <div class="logo-divider"></div>
      <img class="logo-img right" src="./assets/img/logo-concrefer.png" alt="Concrefer">
    </div>

    <!-- Brand -->
    <div class="brand-name">Concre HUB</div>
    <div class="brand-sub">Hub de Aplicativos</div>

    <!-- Progress -->
    <div class="progress-track">
      <div class="progress-fill" id="progressFill"></div>
    </div>
    <div class="progress-pct" id="progressPct">0%</div>

    <!-- Status row -->
    <div class="status-row">
      <span id="statusNet">
        <span class="status-dot" id="statusDot"></span>
        <span id="statusText">Verificando...</span>
      </span>
      <span id="clock">--:--</span>
    </div>
  </div>

  <div class="version">v1.0 â€¢ Concrefer</div>

<script>
(function(){
  /* ---- Clock ---- */
  function updateClock(){
    const now = new Date();
    const hh = String(now.getHours()).padStart(2,'0');
    const mm = String(now.getMinutes()).padStart(2,'0');
    document.getElementById('clock').textContent = hh + ':' + mm;
  }
  updateClock();
  setInterval(updateClock, 10000);

  /* ---- Online / Offline ---- */
  function updateNet(){
    const dot = document.getElementById('statusDot');
    const txt = document.getElementById('statusText');
    if(navigator.onLine){
      dot.className = 'status-dot online';
      txt.textContent = 'Online';
    } else {
      dot.className = 'status-dot offline';
      txt.textContent = 'Offline';
    }
  }
  updateNet();
  window.addEventListener('online', updateNet);
  window.addEventListener('offline', updateNet);

  /* ---- Progress ---- */
  const fill = document.getElementById('progressFill');
  const pct  = document.getElementById('progressPct');
  let progress = 0;
  const total  = 100;
  const duration = 2600;     // total splash time ms
  const steps = 40;
  const interval = duration / steps;

  const timer = setInterval(function(){
    // randomize step between 1-5 so it feels organic
    progress += Math.min(Math.floor(Math.random() * 5) + 1, total - progress);
    if(progress > total) progress = total;
    fill.style.width = progress + '%';
    pct.textContent  = progress + '%';

    if(progress >= total){
      clearInterval(timer);
      setTimeout(function(){
        document.getElementById('splashCard').classList.add('splash-out');
        setTimeout(function(){
          window.location.href = './index.html';
        }, 500);
      }, 300);
    }
  }, interval);

  /* ---- Register SW ---- */
  if('serviceWorker' in navigator){
    navigator.serviceWorker.register('./sw.js', { scope:'./' })
      .catch(function(e){ console.error('SW:', e); });
  }
})();
</script>
</body>
</html>
